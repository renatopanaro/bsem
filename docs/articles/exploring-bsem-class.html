<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Exploring bsem class â€¢ bsem</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Exploring bsem class">
<meta property="og:description" content="bsem">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">bsem</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/bsem.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/exploring-bsem-class.html">Exploring bsem class</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/rvpanaro/bsem/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="exploring-bsem-class_files/htmlwidgets-1.5.1/htmlwidgets.js"></script><link href="exploring-bsem-class_files/vis-4.20.1/vis.css" rel="stylesheet">
<script src="exploring-bsem-class_files/vis-4.20.1/vis.min.js"></script><script src="exploring-bsem-class_files/visNetwork-binding-2.0.9/visNetwork.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Exploring bsem class</h1>
            <h3 class="subtitle">How to get information from the bsem package outcomes</h3>
                        <h4 class="author">Renato Panaro</h4>
                        
            <h4 class="date">2020-07-14</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/rvpanaro/bsem/blob/master/vignettes/exploring-bsem-class.Rmd"><code>vignettes/exploring-bsem-class.Rmd</code></a></small>
      <div class="hidden name"><code>exploring-bsem-class.Rmd</code></div>

    </div>

    
    
<style>
body {
text-align: justify
</style>
<div id="examples" class="section level1">
<h1 class="hasAnchor">
<a href="#examples" class="anchor"></a>Examples</h1>
<p>This vignette describes how to explore the outcomes of estimates obtained with <code><a href="../reference/sem.html">bsem::sem</a></code>. In light of replication studies (e.g: Monte Carlo simulation study), we ran a former analysis to validate the proposed framework. We highly recommend the reader to take a look at <a href="bsem.html">Get started</a> before reading this material. As from the general model described in the mentioned introduction vignette, the two general structures are presented next. One consists of a confirmatory factor analysis and the other of a structural equation model.</p>
<div id="cfa" class="section level2">
<h2 class="hasAnchor">
<a href="#cfa" class="anchor"></a>CFA</h2>
<p>The main <code><a href="../reference/sem.html">bsem::sem</a></code> routine allows semi or full confirmatory factor analysis (CFA). Thus, at least one variable must be chosen to express each construct before running into the analysis. In other words, the user needs to specify at least one manifest variable that leads each block. In this way, semi-confirmatory FA might assist the researcher in evidencing the possible structures to be tested in a conceptual (full) CFA later on.</p>
<p>The data used in this example was generated using the function <code><a href="../reference/simdata.html">bsem::simdata</a></code>, that internally produces artificial variances used to generate normally distributed errors. In addition, factor scores (lambda) are generated from a standard normal distribution and the factor loadings (alpha) from a uniform distribution with support ranging from 0.5 to 2. The factor loading direction (signal) is generated using a simple random sampling. A new artificial data set is wrapped in a list object and can be produced with the following command:</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="no">dt</span> <span class="kw">&lt;-</span> <span class="kw pkg">bsem</span><span class="kw ns">::</span><span class="fu"><a href="../reference/simdata.html">simdata</a></span>(
  <span class="kw">paths</span> <span class="kw">=</span> <span class="kw">NULL</span>,
  <span class="kw">exogenous</span> <span class="kw">=</span> <span class="kw">NULL</span>
)</pre></body></html></div>
<p>The <code>paths</code> and<code>exogenous</code> arguments must be defined as <code>NULL</code> to obtain a data set suitable for factor analysis, in which paths or exogenous variables can not be considered. Now, we can run <code><a href="../reference/sem.html">bsem::sem</a></code> to check whether the estimates retrieved are close to the real values of the parameters.</p>
<p>A data matrix and a list of blocks are the only mandatory arguments as they are necessary to represent the manifest variables related to each construct of the outer model. There are two ways to specify a <code>sem</code> model:</p>
<ol style="list-style-type: decimal">
<li><p>the blocks, paths and exogenous elements are integer vectors referring to the variable (column) position;</p></li>
<li><p>named lists are defined by the user with the factor and variable names, that the automated print, summary and plot functions will inherit.</p></li>
</ol>
<ul>
<li>In this example we go ahead with the first option, unnamed lists are internally named in both cases.</li>
</ul>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="no">dt</span>$<span class="no">blocks</span></pre></body></html></div>
<pre><code>## $F1
## [1] 1 2 3
## 
## $F2
## [1] 4 5 6 7
## 
## $F3
## [1]  8  9 10
## 
## $F4
## [1] 11 12 13 14 15 16
## 
## $F5
## [1] 17 18 19 20 21</code></pre>
<p>Note that the list is named with <code><a href="https://rdrr.io/r/base/c.html">c("F1", "F2", "F3", "F4", "F5")</a></code>, but the elements refer to column positioning, variable names would be internally converted into positioning if that was the case.</p>
<ul>
<li>Descriptive statistics were based on <code><a href="https://rdrr.io/pkg/rstan/man/monitor.html">rstan::monitor</a></code>:</li>
</ul>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="no">cfa</span> <span class="kw">&lt;-</span> <span class="kw pkg">bsem</span><span class="kw ns">::</span><span class="fu"><a href="../reference/sem.html">sem</a></span>(
  <span class="kw">data</span> <span class="kw">=</span> <span class="no">dt</span>$<span class="no">data</span>,
  <span class="kw">blocks</span> <span class="kw">=</span> <span class="no">dt</span>$<span class="no">blocks</span>
)</pre></body></html></div>
<pre><code>## Warning in bsem::sem(data = dt$data, blocks = dt$blocks): underspecification;
## signals not specified: random initial values assigned for alpha</code></pre>
<pre><code>## 
## Extracting posterior samples, please wait...
## 
## Done!</code></pre>
<p>The descriptive statistics for the posterior factor loadings are shown in the R console inspired on the <code>rstan</code> fashion (based on <code><a href="https://rdrr.io/pkg/rstan/man/monitor.html">rstan::monitor</a></code>). Besides, a warning is displayed to remind that the signals of the outer model loadings were not specified. Random initial values are assigned in this case.</p>
<ul>
<li>The structural model can be easily viewed with the plotting routine <code><a href="https://rdrr.io/r/graphics/plot.html">bsem::plot</a></code>:</li>
</ul>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(<span class="no">cfa</span>)</pre></body></html></div>
<div id="htmlwidget-f4c726bf58153bb03418" style="width:700px;height:432.632880098888px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-f4c726bf58153bb03418">{"x":{"nodes":{"id":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26],"type":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"label":["X1","X2","X3","X4","X5","X6","X7","X8","X9","X10","X11","X12","X13","X14","X15","X16","X17","X18","X19","X20","X21","F1","F2","F3","F4","F5"],"nodes":["X1","X2","X3","X4","X5","X6","X7","X8","X9","X10","X11","X12","X13","X14","X15","X16","X17","X18","X19","X20","X21","F1","F2","F3","F4","F5"],"shape":["box","box","box","box","box","box","box","box","box","box","box","box","box","box","box","box","box","box","box","box","box","ellipse","ellipse","ellipse","ellipse","ellipse"],"color":["#440154FF","#440154FF","#440154FF","#414487FF","#414487FF","#414487FF","#414487FF","#2A788EFF","#2A788EFF","#2A788EFF","#22A884FF","#22A884FF","#22A884FF","#22A884FF","#22A884FF","#22A884FF","#7AD151FF","#7AD151FF","#7AD151FF","#7AD151FF","#7AD151FF","#440154FF","#414487FF","#2A788EFF","#22A884FF","#7AD151FF"],"group":["F1","F1","F1","F2","F2","F2","F2","F3","F3","F3","F4","F4","F4","F4","F4","F4","F5","F5","F5","F5","F5","F1","F2","F3","F4","F5"],"style":["filled","filled","filled","filled","filled","filled","filled","filled","filled","filled","filled","filled","filled","filled","filled","filled","filled","filled","filled","filled","filled","filled","filled","filled","filled","filled"],"fontname":["Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto"],"fontcolor":["white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white"],"shadow":[true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true]},"edges":{"id":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42],"from":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21],"to":[22,22,22,23,23,23,23,24,24,24,25,25,25,25,25,25,26,26,26,26,26,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21],"rel":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"label":["-1.15","-1.15"," 1.30","-1.20"," 1.57"," 0.54","-2.31","-1.60"," 0.30","-0.62","-1.43","-1.80","-0.48"," 0.99"," 1.54","-1.32","-0.78"," 1.31","-1.35"," 1.17","-1.16","0.13","0.13","0.89","0.16","0.56","0.33","0.20","0.27","0.37","0.15","0.10","0.11","0.17","0.53","0.74","0.10","0.13","0.69","0.12","0.62","0.11"],"smooth":[true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true],"arrows":["to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to"],"dashes":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],"width":[0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5],"font.size":[15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","size":10,"font":{"color":"white"}},"manipulation":{"enabled":false}},"groups":["F1","F2","F3","F4","F5"],"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":null,"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":true,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":false,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"}},"evals":[],"jsHooks":[]}</script><p>The recursive arrows refer to the specific factor variance. Moreover, we can also compare the posterior factor loadings and the scores with the true values using the <code><a href="../reference/arrayplot.html">bsem::arrayplot</a></code> function. For example:</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="kw pkg">gridExtra</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html">grid.arrange</a></span>(
  <span class="kw pkg">bsem</span><span class="kw ns">::</span><span class="fu"><a href="../reference/arrayplot.html">arrayplot</a></span>(<span class="no">cfa</span>$<span class="no">mean_lambda</span>, <span class="kw">main</span> <span class="kw">=</span> <span class="st">"estimates"</span>, -<span class="fl">6</span>, <span class="fl">6</span>),
  <span class="kw pkg">bsem</span><span class="kw ns">::</span><span class="fu"><a href="../reference/arrayplot.html">arrayplot</a></span>(<span class="no">dt</span>$<span class="no">real</span>$<span class="no">lambda</span>, <span class="kw">main</span> <span class="kw">=</span> <span class="st">"lambda (scores)"</span>, -<span class="fl">6</span>, <span class="fl">6</span>)
)</pre></body></html></div>
<p><img src="exploring-bsem-class_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="kw pkg">gridExtra</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html">grid.arrange</a></span>(
  <span class="kw pkg">bsem</span><span class="kw ns">::</span><span class="fu"><a href="../reference/arrayplot.html">arrayplot</a></span>(<span class="no">cfa</span>$<span class="no">mean_alpha</span>, <span class="kw">main</span> <span class="kw">=</span> <span class="st">"estimates"</span>, -<span class="fl">6</span>, <span class="fl">6</span>),
  <span class="kw pkg">bsem</span><span class="kw ns">::</span><span class="fu"><a href="../reference/arrayplot.html">arrayplot</a></span>(<span class="no">dt</span>$<span class="no">real</span>$<span class="no">alpha</span>, <span class="kw">main</span> <span class="kw">=</span> <span class="st">"alpha (loadings)"</span>, -<span class="fl">6</span>, <span class="fl">6</span>),
  <span class="kw">layout_matrix</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">2</span>), <span class="kw">ncol</span> <span class="kw">=</span> <span class="fl">2</span>)
)</pre></body></html></div>
<p><img src="exploring-bsem-class_files/figure-html/unnamed-chunk-5-2.png" width="700"></p>
<p>From this example, we found that the estimates pattern is tightly close to the true values of the parameters even when the signals are not passed. Also, we have observed that the part of the analysis is intended to confirm the predefined constructs CFA (first loadings matrix lines) and the other is intended to express which variable can compose a later full CFA.</p>
<p>Remember each chain runs in a separate thread, thus, it is recommended specifying (default) the number of cores at least equal to the number of chains. Indeed, from our experience, an increase in the number of iterations raises the runtime but considerably improves the interval and point estimates.</p>
</div>
<div id="sem" class="section level2">
<h2 class="hasAnchor">
<a href="#sem" class="anchor"></a>SEM</h2>
<p>For this model we will use the simulated data already described in the <a href="bsem.html">Get started</a> vignette. This model includes variables that are explained by some common factors, those variables are referred to as the exogenous variables.</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="no">dt</span> <span class="kw">&lt;-</span> <span class="kw pkg">bsem</span><span class="kw ns">::</span><span class="fu"><a href="../reference/simdata.html">simdata</a></span>()</pre></body></html></div>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="no">sem</span> <span class="kw">&lt;-</span> <span class="kw pkg">bsem</span><span class="kw ns">::</span><span class="fu"><a href="../reference/sem.html">sem</a></span>(
  <span class="kw">data</span> <span class="kw">=</span> <span class="no">dt</span>$<span class="no">data</span>,
  <span class="kw">blocks</span> <span class="kw">=</span> <span class="no">dt</span>$<span class="no">blocks</span>,
  <span class="kw">paths</span> <span class="kw">=</span> <span class="no">dt</span>$<span class="no">paths</span>,
  <span class="kw">exogenous</span> <span class="kw">=</span> <span class="no">dt</span>$<span class="no">exogenous</span>
)</pre></body></html></div>
<pre><code>## Warning in bsem::sem(data = dt$data, blocks = dt$blocks, paths = dt$paths, :
## underspecification; signals not specified: random initial values assigned for
## alpha</code></pre>
<pre><code>## 
## Extracting posterior samples, please wait...
## 
## Done!</code></pre>
<p>Similar outcomes can be also obtained for this model:</p>
<div id="htmlwidget-2e0beaa9252fa7f5b07e" style="width:700px;height:432.632880098888px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-2e0beaa9252fa7f5b07e">{"x":{"nodes":{"id":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27],"type":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"label":["X1","X2","X3","X4","X5","X6","X7","X8","X9","X10","X11","X12","X13","X14","X15","X16","X17","X18","X19","X20","X21","F1","F2","F3","F4","F5","Y1"],"nodes":["X1","X2","X3","X4","X5","X6","X7","X8","X9","X10","X11","X12","X13","X14","X15","X16","X17","X18","X19","X20","X21","F1","F2","F3","F4","F5","Y1"],"shape":["box","box","box","box","box","box","box","box","box","box","box","box","box","box","box","box","box","box","box","box","box","ellipse","ellipse","ellipse","ellipse","ellipse","circle"],"color":["#440154FF","#440154FF","#440154FF","#443A83FF","#443A83FF","#443A83FF","#443A83FF","#31688EFF","#31688EFF","#31688EFF","#21908CFF","#21908CFF","#21908CFF","#21908CFF","#21908CFF","#21908CFF","#35B779FF","#35B779FF","#35B779FF","#35B779FF","#35B779FF","#440154FF","#443A83FF","#31688EFF","#21908CFF","#35B779FF","#8FD744FF"],"group":["F1","F1","F1","F2","F2","F2","F2","F3","F3","F3","F4","F4","F4","F4","F4","F4","F5","F5","F5","F5","F5","F1","F2","F3","F4","F5","Y1"],"style":["filled","filled","filled","filled","filled","filled","filled","filled","filled","filled","filled","filled","filled","filled","filled","filled","filled","filled","filled","filled","filled","filled","filled","filled","filled","filled","filled"],"fontname":["Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto","Roboto"],"fontcolor":["white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white","white"],"shadow":[true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true]},"edges":{"id":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49],"from":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,24,25,25,26,22,23,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,27],"to":[22,22,22,23,23,23,23,24,24,24,25,25,25,25,25,25,26,26,26,26,26,22,22,23,23,27,27,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,27],"rel":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"label":["-1.86","-1.67","-0.88","-1.23","-0.97"," 0.76","-1.22","-1.17","-1.92","-1.08"," 1.00"," 0.35","-0.41"," 1.07"," 0.96"," 0.05","-1.63"," 0.84","-1.23","-0.61"," 1.08"," 0.84"," 0.14","-0.87"," 0.45","-0.21"," 0.46","0.14","0.12","0.23","0.11","0.12","2.05","0.11","0.12","0.40","0.13","0.10","0.96","4.20","0.11","0.11","1.92","0.16","1.86","0.14","0.33","2.25","0.89"],"smooth":[true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true],"arrows":["to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to"],"dashes":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,true,true,true,true,true,true,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],"width":[0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25,0.25],"font.size":[15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","size":10,"font":{"color":"white"}},"manipulation":{"enabled":false}},"groups":["F1","F2","F3","F4","F5","Y1"],"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":null,"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":true,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":false,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"}},"evals":[],"jsHooks":[]}</script><p><img src="exploring-bsem-class_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<pre><code>## [[1]]</code></pre>
<p><img src="exploring-bsem-class_files/figure-html/unnamed-chunk-10-1.png" width="700"></p>
<pre><code>## 
## [[2]]</code></pre>
<p><img src="exploring-bsem-class_files/figure-html/unnamed-chunk-10-2.png" width="700"></p>
<pre><code>## 
## [[3]]</code></pre>
<p><img src="exploring-bsem-class_files/figure-html/unnamed-chunk-10-3.png" width="700"></p>
<pre><code>## 
## [[4]]</code></pre>
<p><img src="exploring-bsem-class_files/figure-html/unnamed-chunk-10-4.png" width="700"></p>
<pre><code>## 
## [[5]]</code></pre>
<p><img src="exploring-bsem-class_files/figure-html/unnamed-chunk-10-5.png" width="700"></p>
<p>The first thing to do after fitting the model is to check posterior statistics to assess whether the estimates are good to describe the proposed CFA or SEM model.</p>
</div>
</div>
<div id="graphical-posterior-analysis" class="section level1">
<h1 class="hasAnchor">
<a href="#graphical-posterior-analysis" class="anchor"></a>Graphical posterior analysis</h1>
<div id="interval-estimate" class="section level2">
<h2 class="hasAnchor">
<a href="#interval-estimate" class="anchor"></a>Interval estimate</h2>
<p>Two types of intervals can be obtained:</p>
<div id="hpd-interval" class="section level3">
<h3 class="hasAnchor">
<a href="#hpd-interval" class="anchor"></a>HPD interval</h3>
<ul>
<li>The narrowest (highest posterior density - HPD) credibility interval can be retrieved using <code>.$credint</code>. We have computed HPD intervals fo the factor loadings (alpha), scores (lambda), and regression coefficients (beta).</li>
</ul>
<div class="sourceCode" id="cb19"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span>(<span class="no">cfa</span>$<span class="no">credint</span>)</pre></body></html></div>
<pre><code>## [1] "alpha"  "lambda" "sigma2"</code></pre>
<ul>
<li>This data can be used to plot interval estimates using two packages, <code>ggplot2</code> and <code>tidybayes</code>:</li>
</ul>
<div class="sourceCode" id="cb21"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"ggplot2"</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"tidybayes"</span>)</pre></body></html></div>
<ul>
<li>
<code>dt</code> data.frame object has the mean loadings and the HPD interval lower and upper limits (<code>ll</code> and <code>lu</code>):</li>
</ul>
<div class="sourceCode" id="cb22"><html><body><pre class="r"><span class="no">dt</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(
  <span class="kw">li</span> <span class="kw">=</span> <span class="no">cfa</span>$<span class="no">credint</span>$<span class="no">alpha</span>[, <span class="fl">1</span>],
  <span class="kw">lu</span> <span class="kw">=</span> <span class="no">cfa</span>$<span class="no">credint</span>$<span class="no">alpha</span>[, <span class="fl">2</span>],
  <span class="kw">m</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="no">cfa</span>$<span class="no">mean_alpha</span>)
)</pre></body></html></div>
<ul>
<li>
<code>lnames</code> and <code>snames</code> are used to find the loadings of the conceptual model (those that might not equal zero).</li>
</ul>
<div class="sourceCode" id="cb23"><html><body><pre class="r"><span class="no">lnames</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span>(<span class="no">cfa</span>$<span class="no">mean_alpha</span>)
<span class="no">snames</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span>(<span class="no">cfa</span>$<span class="no">mean_lambda</span>)</pre></body></html></div>
<ul>
<li>
<code>find</code> help us finding these values:</li>
</ul>
<div class="sourceCode" id="cb24"><html><body><pre class="r"><span class="no">find</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"alpha["</span>, <span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span>(<span class="no">lnames</span> <span class="kw">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span>(<span class="no">cfa</span>$<span class="no">blocks</span>)), <span class="st">","</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fl">1</span>:<span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span>(<span class="no">cfa</span>$<span class="no">blocks</span>), <span class="fu"><a href="https://rdrr.io/r/base/lengths.html">lengths</a></span>(<span class="no">cfa</span>$<span class="no">blocks</span>)), <span class="st">"]"</span>)

<span class="no">dt</span> <span class="kw">&lt;-</span> <span class="no">dt</span>[<span class="no">find</span>, ]</pre></body></html></div>
<ul>
<li>One of the options to plot the loadings HPD intervals chart is:</li>
</ul>
<div class="sourceCode" id="cb25"><html><body><pre class="r"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="kw">y</span> <span class="kw">=</span> <span class="no">find</span>, <span class="kw">x</span> <span class="kw">=</span> <span class="no">m</span>, <span class="kw">xmin</span> <span class="kw">=</span> <span class="no">li</span>, <span class="kw">xmax</span> <span class="kw">=</span> <span class="no">lu</span>), <span class="kw">data</span> <span class="kw">=</span> <span class="no">dt</span>) +
  <span class="fu"><a href="http://mjskay.github.io/tidybayes/reference/tidybayes-deprecated.html">geom_pointintervalh</a></span>() +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span>() +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(
    <span class="kw">title</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(<span class="st">"Latent variable"</span>, <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span>(<span class="no">cfa</span>$<span class="no">mean_alpha</span>)[<span class="fl">3</span>]),
    <span class="kw">x</span> <span class="kw">=</span> <span class="st">"Highest posterior density interval"</span>,
    <span class="kw">y</span> <span class="kw">=</span> <span class="st">"variable"</span>
  )</pre></body></html></div>
<pre><code>## Warning: 'geom_pointintervalh' is deprecated.
## Use 'geom_pointinterval' instead.
## See help("Deprecated") and help("tidybayes-deprecated").</code></pre>
<p><img src="exploring-bsem-class_files/figure-html/unnamed-chunk-16-1.png" width="700"></p>
<p>In the SEM example above, all intervals regarding the loading estimates from the conceptual relationships do not include zero.</p>
</div>
<div id="equal-tails-interval" class="section level3">
<h3 class="hasAnchor">
<a href="#equal-tails-interval" class="anchor"></a>Equal tails interval</h3>
<p>Alternatively, it is possible to access equal tails credibility intevals using the <code>bayesplot</code> package:</p>
<div class="sourceCode" id="cb27"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"bayesplot"</span>)</pre></body></html></div>
<ul>
<li>
<code>find</code> help us finding the loading values that have been previously determined to estimate the latent scores:</li>
</ul>
<div class="sourceCode" id="cb28"><html><body><pre class="r"><span class="no">find</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"alpha["</span>, <span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span>(<span class="no">lnames</span> <span class="kw">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span>(<span class="no">cfa</span>$<span class="no">blocks</span>)), <span class="st">","</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fl">1</span>:<span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span>(<span class="no">cfa</span>$<span class="no">blocks</span>), <span class="fu"><a href="https://rdrr.io/r/base/lengths.html">lengths</a></span>(<span class="no">cfa</span>$<span class="no">blocks</span>)), <span class="st">"]"</span>)

<span class="no">dt</span> <span class="kw">&lt;-</span> <span class="no">dt</span>[<span class="no">find</span>, ]</pre></body></html></div>
<ul>
<li>The equal tails intervals are:</li>
</ul>
<div class="sourceCode" id="cb29"><html><body><pre class="r"><span class="kw pkg">gridExtra</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html">grid.arrange</a></span>(<span class="fu"><a href="https://mc-stan.org/bayesplot/reference/MCMC-intervals.html">mcmc_areas</a></span>(<span class="no">cfa</span>$<span class="no">posterior</span>$<span class="no">alpha</span>[, , <span class="no">find</span>]),
  <span class="fu"><a href="https://mc-stan.org/bayesplot/reference/MCMC-intervals.html">mcmc_intervals</a></span>(<span class="no">cfa</span>$<span class="no">posterior</span>$<span class="no">alpha</span>[, , <span class="no">find</span>]),
  <span class="kw">layout_matrix</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">2</span>), <span class="kw">ncol</span> <span class="kw">=</span> <span class="fl">2</span>)
)</pre></body></html></div>
<p><img src="exploring-bsem-class_files/figure-html/unnamed-chunk-19-1.png" width="700"></p>
<p>In addition to the possibilities for intervals, other <code>mcmc_.</code> graphs are recommended, several options include histograms, violin plots, pair plots, and others.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Renato Panaro, VinÃ­cius Mayrink.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '',
    indexName: 'bsem',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
